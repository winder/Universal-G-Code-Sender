<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>com.willwinder.universalgcodesender</groupId>
  <artifactId>UGS</artifactId>
  <version>2.0</version>

  <packaging>jar</packaging>

  <properties>
    <timestamp>${maven.build.timestamp}</timestamp>
    <maven.build.timestamp.format>MMM dd, yyyy</maven.build.timestamp.format>

    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <project.build.releaseSourceDirectory>release_files</project.build.releaseSourceDirectory>
    <maven.compiler.source>1.7</maven.compiler.source>
    <maven.compiler.target>1.7</maven.compiler.target>

    <jetty.version>8.1.16.v20140903</jetty.version>
    <zxing.version>3.2.0</zxing.version>
    <gluegen.version>2.3.1</gluegen.version>
    <jogl.version>2.3.1</jogl.version>
  </properties>

  <dependencies>
    <dependency>
      <groupId>net.glxn</groupId>
      <artifactId>qrgen</artifactId>
      <version>1.3</version>
    </dependency>
    <dependency>
      <groupId>org.jogamp.gluegen</groupId>
      <artifactId>gluegen-rt-main</artifactId>
      <version>${gluegen.version}</version>
    </dependency>
    <dependency>
      <groupId>org.jogamp.jogl</groupId>
      <artifactId>jogl-all-main</artifactId>
      <version>${jogl.version}</version>
    </dependency>
    <dependency>
      <groupId>javax.vecmath</groupId>
      <artifactId>vecmath</artifactId>
      <version>1.5.2</version>
    </dependency>
    <dependency>
      <groupId>javax.media</groupId>
      <artifactId>jmf</artifactId>
      <version>2.1.1e</version>
    </dependency>
    <dependency>
      <groupId>org.swinglabs</groupId>
      <artifactId>swing-layout</artifactId>
      <version>1.0.3</version>
    </dependency>
    <dependency>
      <groupId>org.eclipse.jetty</groupId>
      <artifactId>jetty-server</artifactId>
      <version>${jetty.version}</version>
    </dependency>
    <dependency>
      <groupId>com.google.code.gson</groupId>
      <artifactId>gson</artifactId>
      <version>2.2.4</version>
    </dependency>
    <dependency>
      <groupId>org.apache.commons</groupId>
      <artifactId>commons-lang3</artifactId>
      <version>3.3.1</version>
    </dependency>
    <dependency>
      <groupId>org.scream3r</groupId>
      <artifactId>jssc</artifactId>
      <version>2.8.0</version>
    </dependency>
    <dependency>
      <groupId>com.google.zxing</groupId>
      <artifactId>javase</artifactId>
      <version>${zxing.version}</version>
    </dependency>
    <dependency>
      <groupId>com.google.zxing</groupId>
      <artifactId>core</artifactId>
      <version>${zxing.version}</version>
    </dependency>

    <!-- ************************* -->
    <!-- *** TEST dependencies ***-->

    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>4.12</version>
      <scope>test</scope>
    </dependency>
  </dependencies>

  <build>
    <!-- ================================================== -->
    <!-- = Change default maven src dir to match Netbeans = -->
    <!-- ================================================== -->
    <sourceDirectory>src/</sourceDirectory>
    <testSourceDirectory>test/</testSourceDirectory>

    <resources>
      <!-- PendantUI -->
      <resource>
        <directory>src</directory>
        <includes>
          <include>resources/**</include>
        </includes>
      </resource>
      <!-- 
      <resource>
        <targetPath>${project.build.outputDirectory}/com/willwinder/universalgcodesender/il8n</targetPath>
        <directory>src/com/willwinder/universalgcodesender/il8n</directory>
        <includes>
          <include>MessagesBundle.*</include>
        </includes>
      </resource>
      -->
      <resource>
        <directory>src</directory>
        <filtering>true</filtering>
        <includes>
          <include>resources/build.properties</include>
        </includes>
      </resource>
    </resources>

    <plugins>

      <plugin>
        <groupId>org.mortbay.jetty</groupId>
        <artifactId>jetty-maven-plugin</artifactId>
        <version>8.1.16.v20140903</version>
        <configuration>
          <stopKey>t8qtoU5R8ny6nYqv</stopKey>
          <stopPort>9393</stopPort>
          <scanIntervalSeconds>0</scanIntervalSeconds>
          <useTestClasspath>true</useTestClasspath>
        </configuration>
      </plugin>

      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-jar-plugin</artifactId>
        <version>2.5</version>
        <configuration>
          <archive>
            <manifest>
              <mainClass>com.willwinder.universalgcodesender.MainWindow</mainClass>
              <addDefaultImplementationEntries/>
            </manifest>
          </archive>
        </configuration>
      </plugin>

      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-dependency-plugin</artifactId>
        <version>2.10</version>
        <executions>
          <execution>
            <id>unpack</id>
            <phase>generate-resources</phase>
            <goals>
              <goal>unpack</goal>
            </goals>
            <configuration>
              <artifactItems>
                <!--
                Building Fat-Jars including native files in folders per platform, as described at
                https://jogamp.org/wiki/index.php/JogAmp_JAR_File_Handling
                -->
                <!-- JogAmp, Module GlueGen -->
                <artifactItem>
                  <groupId>org.jogamp.gluegen</groupId>
                  <artifactId>gluegen-rt</artifactId>
                  <classifier>natives-android-armv6</classifier>
                  <version>${gluegen.version}</version>
                  <outputDirectory>${project.build.outputDirectory}/natives/android-armv6</outputDirectory>
                </artifactItem>
                <artifactItem>
                  <groupId>org.jogamp.gluegen</groupId>
                  <artifactId>gluegen-rt</artifactId>
                  <classifier>natives-linux-amd64</classifier>
                  <version>${gluegen.version}</version>
                  <outputDirectory>${project.build.outputDirectory}/natives/linux-amd64</outputDirectory>
                </artifactItem>
                <artifactItem>
                  <groupId>org.jogamp.gluegen</groupId>
                  <artifactId>gluegen-rt</artifactId>
                  <classifier>natives-linux-armv6</classifier>
                  <version>${gluegen.version}</version>
                  <outputDirectory>${project.build.outputDirectory}/natives/linux-armv6</outputDirectory>
                </artifactItem>
                <artifactItem>
                  <groupId>org.jogamp.gluegen</groupId>
                  <artifactId>gluegen-rt</artifactId>
                  <classifier>natives-linux-armv6hf</classifier>
                  <version>${gluegen.version}</version>
                  <outputDirectory>${project.build.outputDirectory}/natives/linux-armv6hf</outputDirectory>
                </artifactItem>
                <artifactItem>
                  <groupId>org.jogamp.gluegen</groupId>
                  <artifactId>gluegen-rt</artifactId>
                  <classifier>natives-linux-i586</classifier>
                  <version>${gluegen.version}</version>
                  <outputDirectory>${project.build.outputDirectory}/natives/linux-i586</outputDirectory>
                </artifactItem>
                <artifactItem>
                  <groupId>org.jogamp.gluegen</groupId>
                  <artifactId>gluegen-rt</artifactId>
                  <classifier>natives-macosx-universal</classifier>
                  <version>${gluegen.version}</version>
                  <outputDirectory>${project.build.outputDirectory}/natives/macosx-universal</outputDirectory>
                </artifactItem>
                <artifactItem>
                  <groupId>org.jogamp.gluegen</groupId>
                  <artifactId>gluegen-rt</artifactId>
                  <classifier>natives-windows-amd64</classifier>
                  <version>${gluegen.version}</version>
                  <outputDirectory>${project.build.outputDirectory}/natives/windows-amd64</outputDirectory>
                </artifactItem>
                <artifactItem>
                  <groupId>org.jogamp.gluegen</groupId>
                  <artifactId>gluegen-rt</artifactId>
                  <classifier>natives-windows-i586</classifier>
                  <version>${gluegen.version}</version>
                  <outputDirectory>${project.build.outputDirectory}/natives/windows-i586</outputDirectory>
                </artifactItem>
                <artifactItem>
                  <groupId>org.jogamp.gluegen</groupId>
                  <artifactId>gluegen-rt</artifactId>
                  <classifier>natives-solaris-amd64</classifier>
                  <version>${gluegen.version}</version>
                  <outputDirectory>${project.build.outputDirectory}/natives/solaris-amd64</outputDirectory>
                </artifactItem>
                <artifactItem>
                  <groupId>org.jogamp.gluegen</groupId>
                  <artifactId>gluegen-rt</artifactId>
                  <classifier>natives-solaris-i586</classifier>
                  <version>${gluegen.version}</version>
                  <outputDirectory>${project.build.outputDirectory}/natives/solaris-i586</outputDirectory>
                </artifactItem>

                <!-- JogAmp, Module JOGL -->
                <artifactItem>
                  <groupId>org.jogamp.jogl</groupId>
                  <artifactId>jogl-all</artifactId>
                  <classifier>natives-android-armv6</classifier>
                  <version>${jogl.version}</version>
                  <outputDirectory>${project.build.outputDirectory}/natives/android-armv6</outputDirectory>
                </artifactItem>
                <artifactItem>
                  <groupId>org.jogamp.jogl</groupId>
                  <artifactId>jogl-all</artifactId>
                  <classifier>natives-linux-amd64</classifier>
                  <version>${jogl.version}</version>
                  <outputDirectory>${project.build.outputDirectory}/natives/linux-amd64</outputDirectory>
                </artifactItem>
                <artifactItem>
                  <groupId>org.jogamp.jogl</groupId>
                  <artifactId>jogl-all</artifactId>
                  <classifier>natives-linux-armv6</classifier>
                  <version>${jogl.version}</version>
                  <outputDirectory>${project.build.outputDirectory}/natives/linux-armv6</outputDirectory>
                </artifactItem>
                <artifactItem>
                  <groupId>org.jogamp.jogl</groupId>
                  <artifactId>jogl-all</artifactId>
                  <classifier>natives-linux-armv6hf</classifier>
                  <version>${jogl.version}</version>
                  <outputDirectory>${project.build.outputDirectory}/natives/linux-armv6hf</outputDirectory>
                </artifactItem>
                <artifactItem>
                  <groupId>org.jogamp.jogl</groupId>
                  <artifactId>jogl-all</artifactId>
                  <classifier>natives-linux-i586</classifier>
                  <version>${jogl.version}</version>
                  <outputDirectory>${project.build.outputDirectory}/natives/linux-i586</outputDirectory>
                </artifactItem>
                <artifactItem>
                  <groupId>org.jogamp.jogl</groupId>
                  <artifactId>jogl-all</artifactId>
                  <classifier>natives-macosx-universal</classifier>
                  <version>${jogl.version}</version>
                  <outputDirectory>${project.build.outputDirectory}/natives/macosx-universal</outputDirectory>
                </artifactItem>
                <artifactItem>
                  <groupId>org.jogamp.jogl</groupId>
                  <artifactId>jogl-all</artifactId>
                  <classifier>natives-windows-amd64</classifier>
                  <version>${jogl.version}</version>
                  <outputDirectory>${project.build.outputDirectory}/natives/windows-amd64</outputDirectory>
                </artifactItem>
                <artifactItem>
                  <groupId>org.jogamp.jogl</groupId>
                  <artifactId>jogl-all</artifactId>
                  <classifier>natives-windows-i586</classifier>
                  <version>${jogl.version}</version>
                  <outputDirectory>${project.build.outputDirectory}/natives/windows-i586</outputDirectory>
                </artifactItem>
                <artifactItem>
                  <groupId>org.jogamp.jogl</groupId>
                  <artifactId>jogl-all</artifactId>
                  <classifier>natives-solaris-amd64</classifier>
                  <version>${jogl.version}</version>
                  <outputDirectory>${project.build.outputDirectory}/natives/solaris-amd64</outputDirectory>
                </artifactItem>
                <artifactItem>
                  <groupId>org.jogamp.jogl</groupId>
                  <artifactId>jogl-all</artifactId>
                  <classifier>natives-solaris-i586</classifier>
                  <version>${jogl.version}</version>
                  <outputDirectory>${project.build.outputDirectory}/natives/solaris-i586</outputDirectory>
                </artifactItem>
              </artifactItems>
            </configuration>
          </execution>
        </executions>
      </plugin>

      <!-- Configure the fat-jar -->
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-shade-plugin</artifactId>
        <version>2.4.1</version>
        <executions>
          <execution>
            <phase>package</phase>
            <goals>
              <goal>shade</goal>
            </goals>
            <configuration>
              <finalName>UniversalGcodeSender</finalName>
              <transformers>
                <transformer implementation="org.apache.maven.plugins.shade.resource.ServicesResourceTransformer"/>
                <transformer implementation="org.apache.maven.plugins.shade.resource.IncludeResourceTransformer"/>
              </transformers>
              <artifactSet>
                <excludes>
                  <!-- exclude natives, because they are copied from the resources -->
                  <exclude>org.jogamp.gluegen:gluegen-rt:natives*</exclude>
                  <exclude>org.jogamp.jogl:jogl-all:natives*</exclude>
                </excludes>
              </artifactSet>
              <filters>
                <filter>
                  <artifact>*:*</artifact>
                  <excludes>
                    <exclude>META-INF/*.SF</exclude>
                    <exclude>META-INF/*.DSA</exclude>
                    <exclude>META-INF/*.RSA</exclude>
                  </excludes>
                </filter>
              </filters>
            </configuration>
          </execution>
        </executions>
      </plugin>

      <!-- Generate the zip file. -->
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-assembly-plugin</artifactId>
        <version>2.5.3</version>
        <configuration>
          <finalName>UniversalGcodeSender</finalName>
          <appendAssemblyId>false</appendAssemblyId>
          <descriptors>
            <descriptor>src/assembly/assembly.xml</descriptor>
          </descriptors>
        </configuration>
      </plugin>

    </plugins>
  </build>

  <reporting>
     <plugins>
        <plugin>
           <groupId>org.codehaus.mojo</groupId>
           <artifactId>findbugs-maven-plugin</artifactId>
           <version>${findbugs.version}</version>
        </plugin>
        <plugin>
           <groupId>org.apache.maven.plugins</groupId>
           <artifactId>maven-checkstyle-plugin</artifactId>
           <version>${checkstyle.version}</version>
        </plugin>
        <plugin>
           <groupId>org.apache.maven.plugins</groupId>
           <artifactId>maven-surefire-report-plugin</artifactId>
           <version>${surefire.reportplugin.version}</version>
        </plugin>
        <plugin>
           <groupId>org.codehaus.mojo</groupId>
           <artifactId>cobertura-maven-plugin</artifactId>
           <version>${cobertura.version}</version>
           <configuration>
               <formats>
                   <format>xml</format>
               </formats>
           </configuration>
        </plugin>
      </plugins>
   </reporting>

</project>
